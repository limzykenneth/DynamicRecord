<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home | Dynamic Record</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 0px; height: 0px">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Dynamic Record</a></h1>
        
            <span class="version">v0.4.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="DynamicCollection.html">DynamicCollection</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="DynamicCollection_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="DynamicCollection.html#data">data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="DynamicCollection.html#saveAll">saveAll</a></li></ul></div></li><li><a href="DynamicRecord.html">DynamicRecord</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="DynamicRecord_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="DynamicRecord.html#all">all</a></li><li><a href="DynamicRecord.html#closeConnection">closeConnection</a></li><li><a href="DynamicRecord.html#findBy">findBy</a></li><li><a href="DynamicRecord.html#first">first</a></li><li><a href="DynamicRecord.html#where">where</a></li></ul></div></li><li><a href="DynamicRecord.Model.html">DynamicRecord.Model</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="DynamicRecord.Model_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="DynamicRecord.Model.html#data">data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="DynamicRecord.Model.html#destroy">destroy</a></li><li><a href="DynamicRecord.Model.html#save">save</a></li><li><a href="DynamicRecord.Model.html#validate">validate</a></li></ul></div></li><li><a href="DynamicSchema.html">DynamicSchema</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="DynamicSchema_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="DynamicSchema.html#definition">definition</a></li><li><a href="DynamicSchema.html#tableName">tableName</a></li><li><a href="DynamicSchema.html#tableSlug">tableSlug</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="DynamicSchema.html#addColumn">addColumn</a></li><li><a href="DynamicSchema.html#addColumns">addColumns</a></li><li><a href="DynamicSchema.html#addIndex">addIndex</a></li><li><a href="DynamicSchema.html#changeColumnType">changeColumnType</a></li><li><a href="DynamicSchema.html#createTable">createTable</a></li><li><a href="DynamicSchema.html#define">define</a></li><li><a href="DynamicSchema.html#read">read</a></li><li><a href="DynamicSchema.html#removeColumn">removeColumn</a></li><li><a href="DynamicSchema.html#removeIndex">removeIndex</a></li><li><a href="DynamicSchema.html#renameColumn">renameColumn</a></li><li><a href="DynamicSchema.html#renameTable">renameTable</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    









    


    <section>
        <article class="readme"><h1>Dynamic Record</h1><h3>A bare minimum Javascript implementation of the Active Record pattern</h3><p>Dynamic Record is a database abstraction package for node.js that is inspired by Ruby on Rails' ActiveRecord for node.js. We aim to support most major database systems including MongoDB, MySQL, PostgreSQL and many more. <strong>For the moment there is only support for MongoDB</strong></p>
<p><strong>Note</strong>: Dynamic Record is currently in early Alpha and should not be considered production ready.</p>
<h2>Installation</h2><p>Dynamic Record is not published on NPM yet but if you wish to try it out now you can install Dynamic Recrod with <code>npm install git+https://github.com/limzykenneth/DynamicRecord.git</code>.</p>
<h2>Usage</h2><p>Although the API is more or less as how we wanted it to be, changes can still occur. Documentation of the API is available at <a href="https://dynamic-record.js.org/">https://dynamic-record.js.org/</a></p>
<p>Before running your app with Dynamic Record included, you will need to set a few environment variables to provided Dynamic Record with your database credentials:</p>
<pre class="prettyprint source"><code>mongo_server=localhost:27017
mongo_db_name=my_database
mongo_user=database_username
mongo_pass=database_password</code></pre><p>You will need to setup a database on your own (for now, we may add setup scripts at some point). An empty database is enough to get started with a user that has <code>readWrite</code> access.</p>
<p>Next we look at Dynamic Record in a bit more detail. Dynamic Record is split into three main parts:</p>
<ul>
<li><a href="#dynamicschema"><code>DynamicSchema</code></a></li>
<li><a href="#dynamicrecord"><code>DynamicRecord</code></a><ul>
<li><a href="#dynamicrecordmodel"><code>DynamicRecord.Model</code></a></li>
</ul>
</li>
<li><a href="#dynamiccollection"><code>DynamicCollection</code></a></li>
</ul>
<p>Before diving into the individual parts, we need to explain a few concepts.</p>
<p>First is that for each table (or collection if you are using MongoDB) in your database, you will create an instance of <a href="#dynamicrecord"><code>DynamicRecord</code></a> and it will be responsible for handling all read operations to the database. Dynamic Record uses a single pooled connection to the database for the moment.</p>
<p>Next is the idea of models and collections. If you have used an MVC framework such as Backbone before, you will be familiar with this concept. We are borrowing quite directly from the concept in Backbone where models are wrapped data objects and collections are an array-like object that contains multiple entries of models. This corresponds to <a href="#dynamicrecordmodel"><code>DynamicRecord.Model</code></a> and <a href="#dynamiccollection"><code>DynamicCollection</code></a> respectively. These instance handle write operations to the database.</p>
<p>Finally for each table in the database they will have their own schema defined with <a href="https://json-schema.org/">JSON Schema</a>. They will be saved in a table named <code>_schema</code> and will mainly be used for validation and in the case of NoSQL database, schema definition. They are mainly accessed by <a href="#dynamicschema"><code>DynamicSchema</code></a> instances.</p>
<hr>
<h4><strong><code>DynamicSchema</code></strong></h4><p>Before creating any entries in the database with Dynamic Record, you will first need to define the tables that are going to be used. A migration tool will be made available some time in the future but for now and also for your application to manipulate database schema, you can use the <code>DynamicSchema</code> class. You can create an instance of <code>DynamicSchema</code> as follow.</p>
<pre class="prettyprint source lang-javascript"><code>const DynamicSchema = require(&quot;dynamic-record&quot;).DynamicSchema;
const mySchema = new DynamicSchema();</code></pre><p>This will create an empty instance of <code>DynamicSchema</code> but it will do nothing else. To create a table in the database with a set schema, call <code>createTable()</code> on the instance and provide to it a parameter in the form of a <a href="https://json-schema.org/">JSON Schema</a> object.</p>
<pre class="prettyprint source lang-javascript"><code>const monarchSchema = require(&quot;./monarch.schema.json&quot;);

mySchema.createTable(monarchSchema).then(() => {
    // Schema created in database
});</code></pre><h4><strong><code>DynamicRecord</code></strong></h4><p>This is the main entry point to the ORM. You can initialize an instance of <code>DynamicRecord</code> with the following snippet.</p>
<pre class="prettyprint source lang-javascript"><code>const DynamicRecord = require(&quot;dynamic-record&quot;);

const myTable = new DynamicRecord({tableSlug: &quot;myTableSlug&quot;});</code></pre><p>With the created instance you can fetch a particular entry from the database by providing a query object to match with <code>findBy()</code>.</p>
<pre class="prettyprint source lang-javascript"><code>myTable.findBy({name: &quot;Henry V&quot;}).then((entry) => {
    console.log(entry.data);
});</code></pre><h4><strong><code>DynamicRecord.Model</code></strong></h4><p><code>DynamicRecord.Model</code> is a wrapper for the objects returned by any query function under <a href="#dynamicrecord"><code>DynamicRecord</code></a>, it is also used to create new models to be inserted into the database. To create a new instance of <code>DynamicRecord.Model</code> use the following snippet.</p>
<pre class="prettyprint source lang-javascript"><code>const DynamicRecord = require(&quot;dynamic-record&quot;);
const myTable = new DynamicRecord({tableSlug: &quot;myTableSlug&quot;});

const newKing = new myTable.Model({
    name: &quot;Henry VI&quot;,
    house: &quot;York&quot;,
    coronation: &quot;6 November 1429&quot;
});</code></pre><p>At this point although the instance is created and populated with data, it is not saved into the database yet. You can still modify it further by manipulating the <code>data</code> property of the instance.</p>
<pre class="prettyprint source lang-javascript"><code>newKing.data.house = &quot;Lancaster&quot;;</code></pre><p>When you are ready to save the model into the database, simply call <code>save()</code> on the instance.</p>
<pre class="prettyprint source lang-javascript"><code>newKing.save().then(() => {
    // Model saved
});</code></pre><h4><strong><code>DynamicCollection</code></strong></h4><p><code>DynamicCollection</code> is usually returned by query functions of a <code>DynamicRecord</code> instance that returns more than one entry such as <code>where()</code>. You can also create your own <code>DynamicCollection</code> instance for easy manipulation of a series of models.</p>
<pre class="prettyprint source lang-javascript"><code>const DynamicCollection = require(&quot;dynamic-record&quot;).DynamicCollection;

const myCollection = new DynamicCollection();</code></pre><p><code>DynamicCollection</code> extends the native Javascript Array object and thus inherits all of the array functions including <code>push()</code>, <code>forEach()</code> and <code>map()</code>.</p>
<p><code>DynamicCollection</code> has a property called <code>data</code> that will return all the models' data objects in a native Javascript array.</p>
<p>After modifying the models on the <code>DynamicCollection</code> instance and you want to save all the changes into the database, instead of calling <code>save()</code> on each of the models individually, you can call <code>saveAll()</code> on the <code>DynamicCollection</code> instance.</p>
<pre class="prettyprint source lang-javascript"><code>myCollection.saveAll().then(() => {
    // All models in collection saved to database
});</code></pre><h2>License</h2><p><a href="https://github.com/limzykenneth/DynamicRecord/blob/master/LICENSE">BSD 2-Clause</a></p></article>
    </section>






</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="width: 0px; height: 0px">
    <div class="footer-text">Dynamic Record by Kenneth Lim</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'package:dynamic-record_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>